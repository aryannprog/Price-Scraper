{% extends "base.html" %}
{% block content %}
<div class="container_fetch">
    <h2 class="page_title">ðŸ“œ Historical Price Data</h2>

    <!-- Table container -->
    <div id="historical-data">
        <p>Loading historical data...</p>
    </div>

    <!-- Download Button -->
    <div class="download-container">
        <a href="/download_historical" class="download-button">Download CSV</a>
    </div>
</div>

<script>
    // Fetch historical data on page load
    document.addEventListener("DOMContentLoaded", function() {
        fetch("/fetch_historical")
        .then(response => response.text())  // Expecting HTML response
        .then(data => {
            document.getElementById("historical-data").innerHTML = data;
        })
        .catch(error => {
            document.getElementById("historical-data").innerHTML = "<p class='error'>Failed to load data.</p>";
        });
    });
</script>
{% endblock %}
